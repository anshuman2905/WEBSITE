<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Farm Layout</title>
<style>
  body { margin: 0; font-family: 'Poppins', sans-serif; }
  #controls {
    position: absolute; top: 10px; left: 10px; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px;
  }
  #farm-container { width: 100vw; height: 100vh; display: block; }
</style>
</head>
<body>
<div id="controls">
  <label>Farm Width: <input type="number" id="farmWidth" value="50"></label><br>
  <label>Farm Length: <input type="number" id="farmLength" value="50"></label><br>
  <label>Crops (name:area comma separated): <input type="text" id="crops" value="Wheat:600,Rice:400"></label><br>
  <button onclick="generateFarm()">Generate Farm</button>
</div>
<div id="farm-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>
<script>
let scene, camera, renderer, controls;

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0xa5d956);

    camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 1, 1000);
    camera.position.set(60, 80, 80);

    renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('farm-container').appendChild(renderer.domElement);

    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(50, 100, 50);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0xffffff, 0.5));

    animate();
}

function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
}

function generateFarm() {
    // Clear previous farm
    while(scene.children.length > 0){ 
        scene.remove(scene.children[0]); 
    }

    const farmWidth = parseFloat(document.getElementById('farmWidth').value);
    const farmLength = parseFloat(document.getElementById('farmLength').value);
    const cropsInput = document.getElementById('crops').value.split(',');
    const crops = cropsInput.map(c => {
        const [name, area] = c.split(':');
        return {name: name.trim(), area: parseFloat(area)};
    });

    // Total area
    const totalArea = farmWidth * farmLength;
    let startX = -farmWidth/2;
    let startZ = -farmLength/2;

    // Simple horizontal split
    crops.forEach(crop => {
        const cropLength = farmLength * (crop.area / totalArea);
        const geometry = new THREE.BoxGeometry(farmWidth, 2, cropLength);
        
        let color = 0x00ff00; // default green
        if(crop.name.toLowerCase() === 'wheat') color = 0xffff66;
        if(crop.name.toLowerCase() === 'rice') color = 0x66ccff;
        if(crop.name.toLowerCase() === 'corn') color = 0xffcc33;

        const material = new THREE.MeshLambertMaterial({color});
        const box = new THREE.Mesh(geometry, material);
        box.position.set(0, 1, startZ + cropLength/2);
        scene.add(box);

        startZ += cropLength;
    });
}

init();
</script>
</body>
</html>
